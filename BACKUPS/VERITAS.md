
## Base parameters
Type                            |Parameter                      |Value                          |Description                                                                   |How to set                                                                          |How to check
--------------------------------|-------------------------------|-------------------------------|------------------------------------------------------------------------------|------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------
INFO                            |                               |7.3.1.100                      |InfoScale Ent. GA                                                             |installer (reboot required)                                                         |
INFO                            |                               |7.3.1.1200                     |CPI patch                                                                     |installer -require /tmp/CPI_7.3.1_P12.pl                                            |
package                         |VRTSvxvm                       |7.3.1.2701                     |Volume Manager                                                                |installp -aXd PKG_SOURCE PKG_NAME                                                   |
package                         |VRTSaslapm                     |7.3.1.102                      |ASLAPM                                                                        |installp -aXd PKG_SOURCE PKG_NAME                                                   |
package                         |VRTSvxfs                       |7.3.1.2701                     |File System                                                                   |installp -aXd PKG_SOURCE PKG_NAME                                                   |
package                         |VRTSodm                        |7.3.1.2200                     |Oracle Disk Manager                                                           |Base version in Patch InfoScale 7.3.1.100                                           |
package                         |VRTSvcs                        |7.3.1.1101                     |Cluster Server                                                                |installp -aXd PKG_SOURCE PKG_NAME                                                   |
package                         |VRTSvcsag                      |7.3.1.003                      |Cluster Server Bundled Agents                                                 |installp -aXd PKG_SOURCE PKG_NAME                                                   |
package                         |VRTSvcsea                      |7.3.1.1100                     |HA Enterprise Agents                                                          |installp -aXd PKG_SOURCE PKG_NAME                                                   |
package                         |VRTSvcstc                      |7.0.8.0                        |Hitachi TrueCopy agent                                                        |installp -aXd PKG_SOURCE PKG_NAME                                                   |
package                         |VRTSvcsrc                      |7.0.0.0                        |HP 3par RemoteCopy agent                                                      |installp -aXd PKG_SOURCE PKG_NAME                                                   |
package                         |VRTSvcse                       |7.0.7.0                        |EMC SRDF agent                                                                |installp -aXd PKG_SOURCE PKG_NAME                                                   |
dmp.tune                        |dmp_probe_idle_lun             |off                            |                                                                              |vxdmpadm settune dmp_probe_idle_lun=off                                             |vxdmpadm gettune dmp_probe_idle_lun
dmp.exclude                     |ctlr                           |sas[0-9]                       |exclude local disks                                                           |vxdmpadm exclude ctlr="sas[0-9]"                                                    |cat /etc/vx/vxvm.exclude
dmp.exclude                     |product                        |EMC:DataDomain DFC             |exclude DD MPIO devices                                                       |vxdmpadm exclude product="EMC:DataDomain DFC"                                       |cat /etc/vx/vxvm.exclude
dmp.attr_enclosure              |iopolicy                       |round-robin                    |                                                                              |vxdmpadm setattr enclosure ENCLOSURE_NAME iopolicy=round-robin                      |vxdmpadm getattr enclosure ENCLOSURE_NAME
dmp.attr_enclosure              |dmp_lun_retry_timeout          |60                             |retry io attempts up to 1 minute even if all pathes failed                    |vxdmpadm setattr enclosure ENCLOSURE_NAME dmp_lun_retry_timeout=60                  |vxdmpadm getattr enclosure ENCLOSURE_NAME
dmp.attr_enclosure              |recoveryoption.retrycount      |fixedretry.5                   |set dmp node fail condition to Fixed-Retry[5]                                 |vxdmpadm setattr enclosure ENCLOSURE_NAME recoveryoption=fixedretry retrycount=5    |vxdmpadm getattr enclosure ENCLOSURE_NAME
vxtune                          |vol_maxio                      |4096                           |allow lagre io operations                                                     |vxtune vol_maxio 4096                                                               |vxtune  vol_maxio
vxtune                          |vol_maxioctl                   |1048576                        |allow lagre io operations                                                     |vxtune vol_maxioctl 1048576                                                         |vxtune vol_maxioctl
vxtune                          |vol_maxspecialio               |4096                           |allow lagre io operations                                                     |vxtune vol_maxspecialio 4096                                                        |vxtune vol_maxspecialio
vxdefault                       |reclaim_on_delete_wait_period  |367                            |                                                                              |vxdefault set reclaim_on_delete_wait_period 367                                     |vxdefault list reclaim_on_delete_wait_period
vxvm-recover                    |vxattachd root &               |#vxattachd root &              |Comment start of vxattachd                                                    |vi /etc/init.d/vxvm-recover `#vxattachd root &`                                     |grep vxattachd /etc/init.d/vxvm-recover
cfgmgr.scandisks                |vxdisk scandisks rule          |deleted                        |Disable vxdisk scandisks by cfgmgr                                            |odmget Config_Rules > /var/tmp/config_rules.bkp ; odmdelete -o Config_Rules -q 'rule like "\*vxdisk scandisks\*"' | odmget -q 'rule like "\*vxdisk scandisks\*"' Config_Rules
tunefstab.system_default        |dalloc_enable                  |0                              |disable delayed allocation (could lead to data corruption)                    |vi /etc/vx/tunefstab `system_default dalloc_enable=0`                               |grep 'system_default dalloc_enable=0' /etc/vx/tunefstab
tunefstab.system_default        |max_seqio_extent_size          |2048                           |sequental write performance                                                   |vi /etc/vx/tunefstab `system_default max_seqio_extent_size=2048`                    |grep 'system_default max_seqio_extent_size=2048' /etc/vx/tunefstab
tunefstab.system_default.backup |discovered_direct_iosz         |128k                           |direct io mode for backup servers                                             |vi /etc/vx/tunefstab `system_default discovered_direct_iosz=128k`                   |grep 'system_default discovered_direct_iosz=128k' /etc/vx/tunefstab
tunefstab.system_default.backup |read_pref_io                   |262144                         |read preffered io size for backup servers                                     |vi /etc/vx/tunefstab `system_default read_pref_io=262144`                           |grep 'system_default read_pref_io=262144' /etc/vx/tunefstab
tunefstab.system_default.backup |read_nstream                   |8                              |read paralellism for backup servers                                           |vi /etc/vx/tunefstab `system_default read_nstream=8`                                |grep 'system_default read_nstream=8' /etc/vx/tunefstab
vxfssystem                      |dchunk_enable                  |1                              |dynamic chanking to carefully clean filesystem cache                          |vxtunefs -D dchunk_enable=1                                                         |grep dchunk_enable /etc/vx/vxfssystem ; vxtunefs -D print \| grep 'dchunk enable'
vxfssystem                      |lowmem_disable                 |1                              |disable low mwmory machanism to emproove cached io                            |vxtunefs -D lowmem_disable=1                                                        |grep lowmem_disable /etc/vx/vxfssystem ; vxtunefs -D print \| grep 'lowmem disable'
filesystems.vxfs.archlogs       |options                        |noreuserd                      |set noreuserd mount option for local (not under VCS control) archlogs fs      |chfs -a options="noreuserd" MNTPT                                                   |mount \| grep 'MNTPT .\*noreuserd'
odm.config                      |MOUNT_OPTS                     |nosmartsync                    |                                                                              |vi /etc/vx/odm.config `MOUNT_OPTS=nosmartsync`                                      |grep MOUNT_OPTS /etc/vx/odm.config ; mount \| grep nosmartsync
odm.config                      |ODM_START                      |1                              |                                                                              |vi /etc/vx/odm.config `ODM_START=1`                                                 |grep ODM_START /etc/vx/odm.config ; df /dev/odm
gab.keep_on_killing             |keep_on_killing                |Enabled                        |                                                                              |vi /etc/gabtab `/sbin/gabconfig -c -k -n2`                                          |gabconfig -l \| egrep -i 'Keep on killing.\*Enabled'
hares.DiskGroup                 |ClearClone                     |1                              |                                                                              |hares -modify RESNAME ClearClone 1                                                  |hares -display -attribute ClearClone -type DiskGroup
hares.DiskGroup                 |ForceImport                    |0                              |                                                                              |hares -modify RESNAME ForceImport 0                                                 |hares -display -attribute ForceImport -type DiskGroup
hares.DiskGroup                 |FaultPropagation               |0                              |                                                                              |hares -override RESNAME FaultPropagation; hares -modify RESNAME FaultPropagation 0  |hares -display -attribute FaultPropagation -type DiskGroup
hares.CVMVolDg                  |ClearClone                     |1                              |                                                                              |hares -modify RESNAME ClearClone 1                                                  |hares -display -attribute ClearClone -type CVMVolDg
hares.CVMVolDg                  |ForceImport                    |0                              |                                                                              |hares -modify RESNAME ForceImport 0                                                 |hares -display -attribute ForceImport -type CVMVolDg
hares.CVMVolDg                  |CVMDeportOnOffline             |1                              |                                                                              |hares -modify RESNAME CVMDeportOnOffline 1                                          |hares -display -attribute CVMDeportOnOffline -type CVMVolDg
hares.CVMVolDg                  |FaultPropagation               |0                              |                                                                              |hares -override RESNAME FaultPropagation; hares -modify RESNAME FaultPropagation 0  |hares -display -attribute FaultPropagation -type CVMVolDg
hares.Mount.exept_nfs           |Critical                       |1                              |Set Critical for all exept NFS                                                |hares -modify RESNAME Critical 1                                                    |hares -display -attribute Critical -type Mount
hares.Mount.exept_nfs           |ToleranceLimit                 |2                              |Set ToleranceLimit=2 for all exept NFS                                        |hares -override RESNAME ToleranceLimit; hares -modify RESNAME ToleranceLimit 2      |hares -display -attribute ToleranceLimit -type Mount
hares.Mount.vxfs.archlogs       |MountOpt                       |noreuserd                      |set noreuserd mount option for VCS controlled archlogs fs                     |hares -modify RESNAME MountOpt noreuserd                                            |hares -display -attribute MountOpt -type Mount
hares.HTC                       |AdvancedOpts.AllowAutoFauloverInterval |240                    |                                                                              |hares -modify RESNAME AdvancedOpts -update AllowAutoFailoverInterval 240            |hares -display -attribute AdvancedOpts -type HTC
hares.HTC                       |LinkMonitor                    |2                              |                                                                              |hares -modify RESNAME LinkMonitor 2                                                 |hares -display -attribute LinkMonitor -type HTC
hares.HTC                       |MonitorTimeout                 |120                            |                                                                              |hares -override RESNAME MonitorTimeout; hares -modify RESNAME MonitorTimeout 120    |hares -display -attribute MonitorTimeout -type HTC
hares.HTC                       |FaultPropagation               |0                              |                                                                              |hares -override RESNAME FaultPropagation; hares -modify RESNAME FaultPropagation 0  |hares -display -attribute FaultPropagation -type HTC
hares.RemoteCopy                |FaultPropagation               |0                              |HPE 3PAR                                                                      |hares -override RESNAME FaultPropagation; hares -modify RESNAME FaultPropagation 0  |hares -display -attribute FaultPropagation -type RemoteCopy
hares.SVCCopyServices           |FaultPropagation               |0                              |IBM SVC/Storwize                                                              |hares -override RESNAME FaultPropagation; hares -modify RESNAME FaultPropagation 0  |hares -display -attribute FaultPropagation -type SVCCopyServices
hares.SRDF                      |FaultPropagation               |0                              |EMC SRDF                                                                      |hares -override RESNAME FaultPropagation; hares -modify RESNAME FaultPropagation 0  |hares -display -attribute FaultPropagation -type SRDF
hares.Proxy                     |FaultPropagation               |0                              |                                                                              |hares -override RESNAME FaultPropagation; hares -modify RESNAME FaultPropagation 0  |hares -display -attribute FaultPropagation -type Proxy
hares.Netlsnr                   |RestartLimit                   |2                              |                                                                              |hares -override RESNAME RestartLimit; hares -modify RESNAME RestartLimit 2          |hares -display -attribute RestartLimit -type Netlsnr
hares.Oracle                    |RestartLimit                   |1                              |                                                                              |hares -override RESNAME RestartLimit; hares -modify RESNAME RestartLimit 1          |hares -display -attribute RestartLimit -type Oracle
hares.Oracle                    |OnlineTimeout                  |600                            |                                                                              |hares -override RESNAME OnlineTimeout; hares -modify RESNAME OnlineTimeout 600      |hares -display -attribute OnlineTimeout -type Oracle
hares.Oracle.CUSTOM             |EnvFile                        |defined                        |Env file shoud be defined and exist                                           |hares -modify RESNAME EnvFile PATH2ENVFILE                                          |hares -display -attribute EnvFile -type Oracle \| grep EnvFile \| while read oresname eattr scope oenvfile ; do [[ -f "$oenvfile" && "$oenvfile" != /opt/VRTSagents/ha/bin/Oracle/envfile ]] \|\| echo $oresname failed ; done

## VCS config upgrade memo

/etc/VRTSvcs/conf/config/\*.cf should appropriate to agents versions
~~~
mv /etc/VRTSvcs/conf/config/types.cf /etc/VRTSvcs/conf/config/types.cf.bk
cp /etc/VRTSvcs/conf/types.cf /etc/VRTSvcs/conf/config/types.cf
hacf -verify /etc/VRTSvcs/conf/config/
~~~

## ODM links (DBA responsibility)

* Oracle 10 and 11: `$ORACLE_HOME/lib/libodm11.so -> /opt/VRTSodm/lib/libodm64.so`
* Oracle 12 and newer: `$ORACLE_HOME/rdbms/lib/odm/libodm[ORACLE_vers].so -> /opt/VRTSodm/lib/libodm64.so`

## Oracle GI libskgxn links (DBA responsibility)

Oracle GI skgxn library (libskgxn) must be linked to Veritas Membership library (VCSMM)
~~~
cd $GRID_HOME/lib
mv libskgxn2.so libskgxn2.oracle.so
ln -s /opt/VRTSvcs/rac/lib/libskgxn2_64.so /opt/ORCLcluster/lib/libskgxn2.so
ln -s /opt/ORCLcluster/lib/libskgxn2.so ./libskgxn2.so
~~~
